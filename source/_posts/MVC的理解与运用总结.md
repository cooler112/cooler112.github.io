---
title: MVC的理解与运用总结
date: 2019-03-06 17:39:59
tags: mvc
categories: 设计架构
---



关于MVC是目前行业常用的设计模式，起源于SmallTalk,是许多计算机语言和架构都采用的设计模式，虽然有MVVC,MVP等其它优秀的设计模式，但是MVC依然是经典的模式，很多人可能会说MVC不够灵活，MVC会使项目臃肿，但那只是没有处理好而已。在我看来，没有绝对好的设计模式，而是在整个系统项目中怎么和系统的四层架构（即：表示层，业务逻辑层，数据持久层，信息系统层）一一对应起来。最经典的就像在不同型号的同一个App，只有表示层发生变化，而其它层不用发生改变，也就是只有View发生变化，Model层不发生改变。View里面不能包含业务逻辑的代码。

一个好的层次设计能够带来优化和开发的巨大便利，而所有代码只写在一个若几个文件不进行权责的区分必然会为后期的开发带来巨大的麻烦，读代码都要花费大半天的时间。因此设计模式显得如此重要。

MVC模式：
Model:保存应用数据状态，回应视图状态查询，处理应用业务逻辑，完成应用功能，将状态变化通知视图  
View:为用户展示信息提供接口，通过视图向控制器发出请求，向模型发出数据查询  
Controller:接收用户请求，更新模型数据，更新所对应视图状态响应用户请求，作为视图和模型的媒介，降低耦合度，权责清晰提高开发效率  
其中Model和Controller之间的交互主要通过KVO来实现，也就是发布定阅模式，对应属性值是变化可以让Controller收到消息
View和Controller之间的交互主要通过代理委托，通知及代码块进行实现

##因此对于一个项目有几点要足够重视：  
1. 按照模块进行细分  
2. 尽量不要把所有模块都要用的视图或弹框放在一个CommenView里面，这样可能的结果是这个公共类越来越臃肿。写成一个单独的模块，或者说单例去实现的方法做到专用要好得多。
3. 所有的视图要继承基视图，导航栏要继承基导航栏，网络请求底层统一调用一个封装好的类。这样最大的好处在于当需求发生改变(导航条上加按钮)或者要统一进行设置时（Http改https）可以很方便的进行设置
4. 使用Cocoapods去管理所有第三方要用过自己去添加，方便集成，更新和管理
5. 重视对代码的重用编写公共类进行操作。

[iOSMVCTemple是自己从项目中提取的框架](https://github.com/cooler112/iOSMVCTemple)，集成了很多第三方库和类别，我自己也做了很多自定义，比如用户信息放到单例，封装好的BaseView,BaseNavigationController.主要目的是写成个好的框架不断完善。方便后期快速布置开发环境。
![](./image/1.png)